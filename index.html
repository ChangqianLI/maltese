<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nainai's Maltese</title>
    <style>
        body {
            margin: 0;
            height: 100vh;
            overflow: hidden;
            position: relative;
        }

        #background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('back.jpg');
            background-size: cover;
            background-position: center;
            -webkit-mask: radial-gradient(circle 0 at 0 0, transparent 0%, black 0%);
            mask: radial-gradient(circle 0 at 0 0, transparent 0%, black 0%);
            transition: -webkit-mask 0.5s ease, mask 0.5s ease;
            z-index: 1; /* èƒŒæ™¯å›¾çš„z-index */
        }

        #xiaobai {
            position: absolute;
            top: 0;
            left: 0;
            width: 20%; /* å°ç™½å›¾ç‰‡å æ®å·¦ä¾§ä¸€éƒ¨åˆ† */
            height: 30%;
            background-image: url('å°ç™½.jpeg');
            background-size: cover;
            background-position: center;
            -webkit-mask: radial-gradient(circle 0 at 0 0, transparent 0%, black 0%);
            mask: radial-gradient(circle 0 at 0 0, transparent 0%, black 0%);
            transition: -webkit-mask 0.5s ease, mask 0.5s ease;
            z-index: 2; /* å°ç™½å›¾ç‰‡çš„z-index */
        }

        #jimao {
            position: absolute;
            top: 0;
            right: 0; /* æ”¾ç½®åœ¨å³ä¾§ */
            width: 20%; /* å°é¸¡æ¯›å›¾ç‰‡å æ®å³ä¾§ä¸€éƒ¨åˆ† */
            height: 30%;
            background-image: url('å°é¸¡æ¯›.jpeg');
            background-size: cover;
            background-position: center;
            -webkit-mask: radial-gradient(circle 0 at 0 0, transparent 0%, black 0%);
            mask: radial-gradient(circle 0 at 0 0, transparent 0%, black 0%);
            transition: -webkit-mask 0.5s ease, mask 0.5s ease;
            z-index: 3; /* å°é¸¡æ¯›å›¾ç‰‡çš„z-indexï¼Œç¡®ä¿å®ƒåœ¨èƒŒæ™¯å›¾å’Œå°ç™½å›¾ç‰‡ä¸Šæ–¹ */
        }

        .paw-print {
            position: absolute;
            font-size: 40px; /* è°ƒæ•´è„šæŒå¤§å° */
            pointer-events: none; /* é˜²æ­¢è„šæŒå¹²æ‰°ç‚¹å‡»äº‹ä»¶ */
            user-select: none; /* é˜²æ­¢è„šæŒè¢«é€‰ä¸­ */
            animation: fadeOut 2s forwards; /* æ·»åŠ æ·¡å‡ºåŠ¨ç”» */
            z-index: 4; /* è„šæŒçš„z-indexï¼Œç¡®ä¿å®ƒåœ¨æœ€ä¸Šå±‚ */
        }

        @keyframes fadeOut {
            0% {
                opacity: 1;
            }
            100% {
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div id="background"></div>
    <div id="xiaobai"></div>
    <div id="jimao"></div> <!-- æ–°å¢å°é¸¡æ¯›å›¾ç‰‡ -->
    <div id="paw-container"></div>

    <!-- éŸ³é¢‘å…ƒç´  -->
    <audio id="music" src="thousand years.MP3"></audio>

    <script>
        // å­˜å‚¨æ‰€æœ‰ç‚¹å‡»åŒºåŸŸçš„mask
        let backgroundMaskLayers = [];
        let xiaobaiMaskLayers = [];
        let jimaoMaskLayers = [];

        // è®°å½•å°ç™½å’Œå°é¸¡æ¯›æ˜¯å¦è¢«ç‚¹å‡»è¿‡
        let xiaobaiClicked = false;
        let jimaoClicked = false;

        // è·å–éŸ³é¢‘å…ƒç´ 
        const music = document.getElementById('music');

        document.addEventListener('click', function(event) {
            // è·å–ç‚¹å‡»ä½ç½®çš„åæ ‡
            const x = event.clientX;
            const y = event.clientY;

            // åˆ›å»ºå°ç‹—è„šæŒå…ƒç´ 
            const pawPrint = document.createElement('div');
            pawPrint.classList.add('paw-print');
            pawPrint.textContent = 'ğŸ¾'; // ä½¿ç”¨ Unicode å­—ç¬¦ ğŸ¾
            pawPrint.style.left = `${x - 20}px`; // è°ƒæ•´ä½ç½®ä½¿è„šæŒä¸­å¿ƒåœ¨ç‚¹å‡»ä½ç½®
            pawPrint.style.top = `${y - 20}px`;

            // å°†è„šæŒæ·»åŠ åˆ°å®¹å™¨ä¸­
            const pawContainer = document.getElementById('paw-container');
            pawContainer.appendChild(pawPrint);

            // è®¾ç½®ä¸€æ®µæ—¶é—´åç§»é™¤è„šæŒ
            setTimeout(() => {
                pawPrint.remove();
            }, 2000); // 2ç§’åç§»é™¤è„šæŒ

            // æ·»åŠ æ–°çš„maskåŒºåŸŸ
            const radius = 100; // æ¯æ¬¡ç‚¹å‡»æ˜¾ç°çš„åŠå¾„

            // è·å–å°ç™½å’Œå°é¸¡æ¯›å›¾ç‰‡çš„ä½ç½®å’Œå¤§å°
            const xiaobai = document.getElementById('xiaobai');
            const xiaobaiRect = xiaobai.getBoundingClientRect();
            const jimao = document.getElementById('jimao');
            const jimaoRect = jimao.getBoundingClientRect();

            // åˆ¤æ–­ç‚¹å‡»ä½ç½®æ˜¯å¦åœ¨å°ç™½å›¾ç‰‡åŒºåŸŸå†…
            if (x >= xiaobaiRect.left && x <= xiaobaiRect.right && y >= xiaobaiRect.top && y <= xiaobaiRect.bottom) {
                const localX = x - xiaobaiRect.left; // è®¡ç®—ç›¸å¯¹äºå°ç™½å›¾ç‰‡çš„å±€éƒ¨åæ ‡
                const localY = y - xiaobaiRect.top;
                const newMask = `radial-gradient(circle ${radius}px at ${localX}px ${localY}px, black 0%, transparent 100%)`;
                xiaobaiMaskLayers.push(newMask);
                xiaobai.style.webkitMask = xiaobaiMaskLayers.join(', ');
                xiaobai.style.mask = xiaobaiMaskLayers.join(', ');
                xiaobaiClicked = true; // æ ‡è®°å°ç™½å›¾ç‰‡è¢«ç‚¹å‡»è¿‡
            }

            // åˆ¤æ–­ç‚¹å‡»ä½ç½®æ˜¯å¦åœ¨å°é¸¡æ¯›å›¾ç‰‡åŒºåŸŸå†…
            if (x >= jimaoRect.left && x <= jimaoRect.right && y >= jimaoRect.top && y <= jimaoRect.bottom) {
                const localX = x - jimaoRect.left; // è®¡ç®—ç›¸å¯¹äºå°é¸¡æ¯›å›¾ç‰‡çš„å±€éƒ¨åæ ‡
                const localY = y - jimaoRect.top;
                const newMask = `radial-gradient(circle ${radius}px at ${localX}px ${localY}px, black 0%, transparent 100%)`;
                jimaoMaskLayers.push(newMask);
                jimao.style.webkitMask = jimaoMaskLayers.join(', ');
                jimao.style.mask = jimaoMaskLayers.join(', ');
                jimaoClicked = true; // æ ‡è®°å°é¸¡æ¯›å›¾ç‰‡è¢«ç‚¹å‡»è¿‡
            }

            // å¦‚æœå°ç™½å’Œå°é¸¡æ¯›éƒ½è¢«ç‚¹å‡»è¿‡ï¼Œæ’­æ”¾éŸ³ä¹
            if (xiaobaiClicked && jimaoClicked && music.paused) {
                music.play(); // æ’­æ”¾éŸ³ä¹
            }

            // æ›´æ–°èƒŒæ™¯å›¾çš„mask
            const newMask = `radial-gradient(circle ${radius}px at ${x}px ${y}px, black 0%, transparent 100%)`;
            backgroundMaskLayers.push(newMask);
            const background = document.getElementById('background');
            background.style.webkitMask = backgroundMaskLayers.join(', ');
            background.style.mask = backgroundMaskLayers.join(', ');
        });
    </script>
</body>
</html>